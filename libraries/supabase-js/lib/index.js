'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.createClient=void 0;var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_Helpers=require('./utils/Helpers'),_Supabase=require('./Supabase'),_Supabase2=_interopRequireDefault(_Supabase),_postgrestJs=require('@supabase/postgrest-js');function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var SupabaseClient=function(){function a(b,c){2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,a),this.supabaseUrl=null,this.supabaseKey=null,this.restUrl=null,this.realtimeUrl=null,this.defaultSchema='public',this.subscriptions={},this.authenticate(b,c)}return _createClass(a,[{key:'authenticate',value:function c(a,b){this.supabaseUrl=a,this.supabaseKey=b,this.restUrl=a+'/rest/v1',this.realtimeUrl=(a+'/realtime/v1').replace('http','ws')}},{key:'from',value:function c(a){var b=(0,_Helpers.uuid)();return this.subscriptions[b]=new _Supabase2.default(a,this.restUrl,this.realtimeUrl,this.defaultSchema,this.supabaseKey,b),this.subscriptions[b]}},{key:'rpc',value:function d(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,c=new _postgrestJs.PostgrestClient(this.restUrl,{headers:{apikey:this.supabaseKey}});return c.rpc(a,b)}},{key:'getSubscriptions',value:function a(){return Object.values(this.subscriptions)}},{key:'removeSubscription',value:function b(a){a.unsubscribe(),delete this.subscriptions[a.uuid]}}]),a}(),createClient=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};return new SupabaseClient(a,b,c)};exports.createClient=createClient;