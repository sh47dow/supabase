---
id: stored-procedures
title: 'Stored Procedures'
description: 'How to use stored procedures (rpc) with Supabase'
---

import Collapsable from '../../src/components/Collapsable'
import CommonFilters from '../common/CommonFilters'
import CommonResponses from '../common/CommonResponses.mdx'
import DummyData from '../common/DummyData.mdx'
import CustomCodeBlock from '../../src/components/CustomCodeBlock'
import {
  storedSingleJs,
  storedBulkJs,
  storedReadingJs,
  storedFilterJs,
  storedMatchJs,
  storedEqJs,
  storedGtJs,
  storedLtJs,
  storedGteJs,
  storedLteJs,
  storedLikeJs,
  storedIlikeJs,
  storedIsJs,
  storedInJs,
  storedNeqJs,
} from './examples/stored'

You can call stored procedures as a "Remote Procedure Call".

That's a fancy way of saying that you can put some logic into your database then call it from anywhere.
This is especially useful when the logic rarely changes - like password resets and updates.

<DummyData />

### Single call

<CustomCodeBlock
  header="Example of invoking a stored procedure that taking in a name of a city and returning it."
  js={storedSingleJs}
  jsHighlight="{7-8}"
  response={`{
    "body": [
        {"echo_city": "The Shire"}
    ],
    "status": 200,
    "statusCode": 200,
    "statusText": "OK"   
} 
  `}
/>

### Bulk call

This example would call a the same stored procedure above (twice), but it will also wait to receive the response only when all the calls have completed:

<CustomCodeBlock
  header="Example of invoking the same stored procedure multiple times within one call."
  js={storedBulkJs}
  jsHighlight="{7-11}"
  response={`{
    "body": [
        {"echo_city": "The Shire"},
        {"echo_city": "Mordor"}
    ],
    "status": 200,
    "statusCode": 200,
    "statusText": "OK"   
} 
  `}
/>

### Reading data

This example shows how to call a stored function that returns a table type response:

<CustomCodeBlock
  header="Example of invoking the same stored procedure multiple times within one call."
  js={storedReadingJs}
  jsHighlight="{7-8}"
  response={`{
    "body": [
      { "name": "Rio de Janeiro", "country_id": 76 },
      { "name": "Beijing", "country_id": 156 },
      { "name": "Paris", "country_id": 250 },
      { "name": "Auckland", "country_id": 554 },
      { "name": "Lagos", "country_id": 556 },
      { "name": "San Francisco", "country_id": 840 }
    ],
    "status": 200,
    "statusCode": 200,
    "statusText": "OK"   
} 
  `}
/>

## Reference

### `rpc()`

```js {2}
supabase
    .rpc(functionName, functionParameters)
```

#### `functionName: string`

Name of stored function in the database.

#### `functionParameters: { object? | array? }`

Parameters to be passed to the stored function.

---

## Filtering

### `filter()`

<CustomCodeBlock
  header="Shows how to use filter( ) with rpc( )"
  js={storedFilterJs}
  jsHighlight="{9}"
  response={`{
  "body": [
    { "name": "Paris", "country_id": 250 },
  ],
  "status": 200,
  "statusCode": 200,
  "statusText": "OK"
}`}
/>

<br/>

<CommonFilters filter='filter'/>

### `match()`

<CustomCodeBlock
  header="Shows how to use match( ) with rpc( )"
  js={storedMatchJs}
  jsHighlight="{9}"
  response={`{
  "body": [
    { "name": "Beijing", "country_id": 156 },
  ],
  "status": 200,
  "statusCode": 200,
  "statusText": "OK"
}`}
/>

<br/>

<CommonFilters filter='match'/>

### `eq()`

<CustomCodeBlock
  header="Shows how to use eq( ) with rpc( )"
  js={storedEqJs}
  jsHighlight="{9}"
  response={`{
  "body": [
    { "name": "San Francisco", "country_id": 840 },
  ],
  "status": 200,
  "statusCode": 200,
  "statusText": "OK"
}`}
/>

<br/>

<CommonFilters filter='eq'/>

### `neq()`

<CustomCodeBlock
  header="Shows how to use neq( ) with rpc( )"
  js={storedNeqJs}
  jsHighlight="{9}"
  response={`{
  "body": [
    { "name": "Rio de Janeiro", "country_id": 76 },
    { "name": "Beijing", "country_id": 156 },
    { "name": "Paris", "country_id": 250 },
    { "name": "Auckland", "country_id": 554 },
    { "name": "Lagos", "country_id": 556 },
    { "name": "San Francisco", "country_id": 840 }
  ],
  "status": 200,
  "statusCode": 200,
  "statusText": "OK"
}`}
/>

<br/>

<CommonFilters filter='neq'/>

### `gt()`

<CustomCodeBlock
  header="Shows how to use gt( ) with rpc( )"
  js={storedGtJs}
  jsHighlight="{9}"
  response={`{
  "body": [
    { "name": "Auckland", "country_id": 554 },
    { "name": "Lagos", "country_id": 556 },
    { "name": "San Francisco", "country_id": 840 }
  ],
  "status": 200,
  "statusCode": 200,
  "statusText": "OK"
}`}
/>

<br/>

<CommonFilters filter='gt'/>

### `lt()`

<CustomCodeBlock
  header="Shows how to use lt( ) with rpc( )"
  js={storedLtJs}
  jsHighlight="{9}"
  response={`{
  "body": [
    { "name": "Rio de Janeiro", "country_id": 76 },
    { "name": "Beijing", "country_id": 156 }
  ],
  "status": 200,
  "statusCode": 200,
  "statusText": "OK"
}`}
/>

<br/>

<CommonFilters filter='lt'/>

### `gte()`

<CustomCodeBlock
  header="Shows how to use gte( ) with rpc( )"
  js={storedGteJs}
  jsHighlight="{9}"
  response={`{
  "body": [
    { "name": "Paris", "country_id": 250 },
    { "name": "Auckland", "country_id": 554 },
    { "name": "Lagos", "country_id": 556 },
    { "name": "San Francisco", "country_id": 840 }
  ],
  "status": 200,
  "statusCode": 200,
  "statusText": "OK"
}`}
/>

<br/>

<CommonFilters filter='gte'/>

### `lte()`

<CustomCodeBlock
  header="Shows how to use lte( ) with rpc( )"
  js={storedLteJs}
  jsHighlight="{9}"
  response={`{
  "body": [
    { "name": "Rio de Janeiro", "country_id": 76 },
    { "name": "Beijing", "country_id": 156 },
    { "name": "Paris", "country_id": 250 }
  ],
  "status": 200,
  "statusCode": 200,
  "statusText": "OK"
}`}
/>

<br/>

<CommonFilters filter='lte'/>

### `like()`

<CustomCodeBlock
  header="Shows how to use like( ) with rpc( )"
  js={storedLikeJs}
  jsHighlight="{9}"
  response={`{
  "body": [
    { "name": "Auckland", "country_id": 554 },
  ],
  "status": 200,
  "statusCode": 200,
  "statusText": "OK"
}`}
/>

<br/>

<CommonFilters filter='like'/>

### `ilike()`

<CustomCodeBlock
  header="Shows how to use ilike( ) with rpc( )"
  js={storedIlikeJs}
  jsHighlight="{9}"
  response={`{
  "body": [
    { "name": "Auckland", "country_id": 554 },
    { "name": "Lagos", "country_id": 556 },
  ],
  "status": 200,
  "statusCode": 200,
  "statusText": "OK"
}`}
/>

<br/>

<CommonFilters filter='ilike'/>

### `is()`

<CustomCodeBlock
  header="Shows how to use is( ) with rpc( )"
  js={storedIsJs}
  jsHighlight="{9}"
  response={`{
  "body": [
  ],
  "status": 200,
  "statusCode": 200,
  "statusText": "OK"
}`}
/>

<br/>

<CommonFilters filter='is'/>

### `in()`

<CustomCodeBlock
  header="Shows how to use in( ) with rpc( )"
  js={storedInJs}
  jsHighlight="{9}"
  response={`{
  "body": [
    { "name": "Rio de Janeiro", "country_id": 76 },
    { "name": "San Francisco", "country_id": 840 }
  ],
  "status": 200,
  "statusCode": 200,
  "statusText": "OK"
}`}
/>

<br/>

<CommonFilters filter='in'/>

## Responses

#### 200 OK
Successful request

#### 201 Created
Successful

<CommonResponses />